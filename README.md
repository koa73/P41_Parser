# Модульный проект для обработки файлов DrawIO

Этот проект позволяет анализировать файлы в формате DrawIO, выявлять визуальные объекты, сопоставлять их с объектами модели данных и работать с метаданными.

## Структура проекта

- `main.py` - главный файл для запуска приложения
- `src/drawio_processor.py` - модуль для обработки файлов DrawIO
- `data/` - каталог с исходными файлами DrawIO для обработки
- `result/` - каталог для хранения сгенерированных файлов DrawIO
- `config/` - каталог с файлами конфигурации и схемами преобразования
- `config/stencil_templates.yaml` - файл шаблонов для поиска stencil объектов
- `tests/test_main.py` - тестовый файл для демонстрации работы
- `tests/test_all_files.py` - тестовый файл для проверки всех drawio файлов
- `tests/test_create_network_objects.py` - тестовый файл для создания новых drawio файлов с найденными сетевыми объектами
- `tests/test_templates.py` - тестовый файл для проверки работы с шаблонами stencil
- `tests/test_specific_file.py` - тестовый файл для демонстрации создания новых drawio файлов с найденными сетевыми объектами
- `tests/test_full_system.py` - тестовый файл для комплексного тестирования всех компонентов
- `tests/test_universal_method.py` - тестовый файл для проверки универсального метода поиска stencil объектов

## Использование

Для запуска приложения выполните:

```bash
python main.py [путь_к_каталогу_с_drawio_файлами]
```

Если путь не указан, программа будет искать файлы в подкаталоге `data`.

## Функциональность

- Сканирование каталога на наличие файлов с расширением `.drawio`
- Интерактивное меню для выбора файла
- Чтение содержимого выбранного файла
- Поиск сетевых объектов (stencil), описывающих сети
- Поиск объектов по шаблонам из YAML файла
- Вывод статистики найденных сетевых объектов
- Создание новых drawio файлов с найденными сетевыми объектами
- Хранение сгенерированных файлов в каталоге `result/`
- Возможность дальнейшей обработки структуры файла

## Новые методы

### find_network_stencils(filename: str = None) -> List[dict]
Метод для поиска stencil объектов, описывающих сети в файле drawio. Возвращает список словарей с информацией о найденных сетевых объектах.

### find_stencils_by_template(filename: str = None, template_file: str = None) -> List[dict]
Универсальный метод для поиска stencil объектов по шаблонам из YAML файла. Возвращает список словарей с информацией о найденных объектах и их типами.

### find_network_stencils_by_template(filename: str = None, template_file: str = None) -> List[dict]
Метод для обратной совместимости - вызывает универсальный метод find_stencils_by_template. Возвращает список словарей с информацией о найденных объектах и их типами.

### load_stencil_templates(template_file: str = None) -> dict
Метод для загрузки шаблонов для поиска stencil объектов из YAML файла.

### print_network_statistics(filename: str = None)
Метод для вывода статистики найденных сетевых объектов, включая общее количество и распределение по типам объектов.

### create_new_drawio_with_network_objects(source_filename: str = None, output_filename: str = None)
Метод для создания нового drawio файла, содержащего только найденные сетевые объекты из исходного файла.

## Типы объектов

Система поддерживает следующие типы объектов:
- Network - сетевые объекты (прямоугольники со скругленными углами, серого цвета, содержащие IP-адреса и описания)